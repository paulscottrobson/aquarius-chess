              	; --------------------------------------
              	; zasm: assemble "m7.asm"
              	; date: 2021-10-17 13:01:09
              	; --------------------------------------


              	; ***************************************************************************************
              	; ***************************************************************************************
              	;
              	;		Name : 		m7.asm
              	;		Author :	Paul Robson (paul@robsons.org.uk)
              	;		Date : 		15th October 2021
              	;		Purpose :	M7 Main.
              	;
              	; ***************************************************************************************
              	; ***************************************************************************************
              	
C000:         	CodeStart = 0xC000
FFFF:         	CodeEnd = 0xFFFF
              	
C000:         		.org CodeStart
              	
              	; ***************************************************************************************
              	;
              	; 									  Code Header
              	;
              	; ***************************************************************************************
              	
C000:         	start: 								
C000: 2A0CC0  		ld 		hl,(StartAddress) 				; running from here
C003: E9      		jp 		(hl) 							
              	
C004:         	InformationBlock:
C004: 00C0    		.word 	start 							; +$00 base address of kernel
C006: 4BC0    		.word 	InterfaceHandler 				; +$02 Interface routine
              	
              		.include "kernel/data.asm" 				; data area.
              	; ***************************************************************************************
              	; ***************************************************************************************
              	;
              	;		Name : 		data.asm
              	;		Author :	Paul Robson (paul@robsons.org.uk)
              	;		Date : 		15th October 2021
              	;		Purpose :	Data 
              	;
              	; ***************************************************************************************
              	; ***************************************************************************************
              	
              	
              	; ***************************************************************************************
              	;
              	;										Data Area
              	;
              	; ***************************************************************************************
              	
C008:         	DataArea:
              	;
              	; 		Initial Stack Pointer
              	;
C008:         	StackPointer:
C008: FF3F    		.dw 	$3FFF
              	;
              	; 		Next free code byte
              	;
C00A:         	CodeNextFree:
C00A: 98C5    		.dw 	FreeSpace
              	;
              	; 		Execute address for startup
              	;
C00C:         	StartAddress:	
C00C: 29C0    		.dw 	Main
              	;
              	; 		Dictionary start (works down)
              	;
C00E:         	DictionaryBase:
C00E: 48FE    		.dw 	DictionaryInstalledBase
              	;
              	; 		Current state of the 3 registers
              	;
C010:         	RegA:
C010: 0000    		.dw 	$0000
C012:         	RegB:
C012: 0000    		.dw 	$0000
C014:         	RegC:
C014: 0000    		.dw 	$0000
              	;
              	; 		Current work trying to do
              	;
C016:         	CurrentWord:
C016: 0000    		.dw 	0
              	;
              	;		Buffer for error messages
              	;	
C018:         	ErrorBuffer:
C018: FFFFFFFF		.ds 	17
C01C: FF...   	
              		.include "kernel/kernel.asm"			; kernel code.	
              	; ***************************************************************************************
              	; ***************************************************************************************
              	;
              	;		Name : 		kernel.asm
              	;		Author :	Paul Robson (paul@robsons.org.uk)
              	;		Date : 		14th October 2021
              	;		Purpose :	Kernel Main Program
              	;
              	; ***************************************************************************************
              	; ***************************************************************************************
              	
              	; ***************************************************************************************
              	;
              	; 									Entry point
              	;
              	; ***************************************************************************************
              	
C029:         	Main:
C029: ED7B08C0			ld 		sp,(StackPointer)			; reset Stack Pointer
C02D: 2100E1  			ld 		hl,testCode
C030: CDB6C0  			call 	CompileStream
              	;
              	; 		Warm Start
              	;
C033:         	WarmStart:
C033: 2118C0  			ld 		hl,ErrorBuffer
C036: 364D    			ld 		(hl),'M'
C038: 23      			inc 	hl
C039: 3637    			ld 		(hl),'7'
C03B: 23      			inc 	hl
C03C: 3600    			ld 		(hl),0
              	;
              	; 		Access the user interface
              	;
C03E:         	Interface:		
C03E: 2118C0  			ld 		hl,ErrorBuffer 				; point HL to Error Buffer
C041: ED7B08C0			ld 		sp,(StackPointer)			; reset Stack Pointer
C045: ED4B06C0			ld 		bc,(InformationBlock+2)
C049: C5      			push 	bc
C04A: C9      			ret
              	;
              	; 		The default 'user interface'
              	;
C04B:         	InterfaceHandler:		
C04B: 11EEEE  			ld 		de,$EEEE
C04E: 01EEEE  			ld 		bc,$EEEE
C051: 76      			halt
C052: 18F7    			jr 		InterfaceHandler
              	;
              	; 		Word cannot be executed error
              	;
C054:         	WordIsCompileOnly:
C054: 3E43    			ld 		a,'C'
C056: 1802    			jr 		SetErrorBuffer
              	;
              	; 		Unknown word error
              	;
C058:         	UnknownWord:
C058: 3E3F    			ld 		a,'?'
              	;
              	; 		Report error, copy char to error buffer, then space, then current word.
              	;		
C05A:         	SetErrorBuffer:
C05A: 2118C0  			ld 		hl,ErrorBuffer
C05D: 77      			ld 		(hl),a
C05E: 23      			inc 	hl
C05F: 3620    			ld 		(hl),' '
C061: 23      			inc 	hl
C062: ED5B16C0			ld 		de,(CurrentWord)
C066:         	_SEBCopy:
C066: 3600    			ld 		(hl),0
C068: 1A      			ld 		a,(de)
C069: B7      			or  	a
C06A: 28D2    			jr 		z,Interface
C06C: E63F    			and 	$3F
C06E: FE20    			cp 		$20
C070: 28CC    			jr 		z,Interface
C072: EE20    			xor 	$20
C074: C620    			add 	$20
C076: FE41    			cp 		'A'
C078: 3806    			jr 		c,_SEBNotAlpha
C07A: FE5B    			cp 		'Z'+1
C07C: 3002    			jr 		nc,_SEBNotAlpha
C07E: C620    			add 	$20
C080:         	_SEBNotAlpha:
C080: 77      			ld 		(hl),a
C081: 23      			inc 	hl
C082: 13      			inc 	de
C083: 18E1    			jr 		_SEBCopy		
              	
              			.include 	"code.asm"
              	; ***************************************************************************************
              	; ***************************************************************************************
              	;
              	;		Name : 		code.asm
              	;		Author :	Paul Robson (paul@robsons.org.uk)
              	;		Date : 		15th October 2021
              	;		Purpose :	Miscellaneous words
              	;
              	; ***************************************************************************************
              	; ***************************************************************************************
              	
              	; ***************************************************************************************
              	;
              	; 		Copy the code following (length byte first) then pop to previous level.
              	;
              	; ***************************************************************************************
              	
C085:         	CopyFollowing:
C085: E3      			ex 		(sp),hl  			 		; old HL saved on stack, HL contains length pointer
C086: C5      			push 	bc 							; save BC
C087: 46      			ld 		b,(hl) 						; get count to copy
C088:         	_CopyFollowing:
C088: 23      			inc 	hl 							; get next to copy
C089: 7E      			ld 		a,(hl)
C08A: CDABC0  			call 	CompileByte 				; and compile it.
C08D: 10F9    			djnz 	_CopyFollowing 				; copy that many bytes.	
C08F: C1      			pop 	bc 							; restore BC, HL
C090: E1      			pop 	hl 
C091: C9      			ret 								; return to the previous level.
              	
              	; ***************************************************************************************
              	;
              	; 							Compile call to following code
              	;
              	; ***************************************************************************************
              	
C092:         	CompileCallFollowing:
C092: 3ECD    			ld 		a,$CD 						; CD is Z80 "CALL" 
C094: CDABC0  			call 	CompileByte
C097: E1      			pop 	hl 							; get address to compile call to
C098: CD9CC0  			call 	CompileWord
C09B: C9      			ret 								; return to the previous level.
              	
              	; ***************************************************************************************
              	;
              	;									Compile HL to Code Space
              	;
              	; ***************************************************************************************
              	
C09C:         	CompileWord:
C09C: EB      			ex 		de,hl 						; DE contains value
C09D: E5      			push 	hl 							; save HL
C09E: 2A0AC0  			ld 		hl,(CodeNextFree) 			; get code address
C0A1: 73      			ld 		(hl),e 						; write out
C0A2: 23      			inc 	hl 
C0A3: 72      			ld 		(hl),d
C0A4: 23      			inc 	hl
C0A5: 220AC0  			ld 		(CodeNextFree),hl 			; update code address
C0A8: E1      			pop 	hl 							; restore HL, DE
C0A9: EB      			ex 		de,hl 							
C0AA: C9      			ret
              	
              	; ***************************************************************************************
              	;
              	;									Compile A to Code Space
              	;
              	; ***************************************************************************************
              	
C0AB:         	CompileByte:
C0AB: E5      			push 	hl 							; save HL, get code address
C0AC: 2A0AC0  			ld 		hl,(CodeNextFree)
C0AF: 77      			ld 		(hl),a  					; write out
C0B0: 23      			inc 	hl 							; bump & write back
C0B1: 220AC0  			ld 		(CodeNextFree),hl
C0B4: E1      			pop 	hl 	
C0B5: C9      			ret
              			.include 	"compiler.asm"
              	; ***************************************************************************************
              	; ***************************************************************************************
              	;
              	;		Name : 		compiler.asm
              	;		Author :	Paul Robson (paul@robsons.org.uk)
              	;		Date : 		16th October 2021
              	;		Purpose :	Compile stream defining executing or compiling words 
              	;
              	; ***************************************************************************************
              	; ***************************************************************************************
              	
              	; ***************************************************************************************
              	;
              	; 	Compile stream at HL, executing, compiling or defining words according to their 
              	; 	colour. This is not re-entrant, as it exits to the warm start unless it goes to 
              	; 	compile something else.
              	;
              	; ***************************************************************************************
              	
C0B6:         	CompileStream:
C0B6: 7E      			ld 		a,(hl) 						; get next character
C0B7: B7      			or 		a 							; if zero, warm start as end of stream
C0B8: CA33C0  			jp 		z,WarmStart
C0BB: 23      			inc 	hl 							; increment in case it is space
C0BC: E63F    			and 	$3F 						; check it is a coloured space.
C0BE: FE20    			cp 		$20
C0C0: 28F4    			jr 		z,CompileStream 			; if so go back
C0C2: 2B      			dec 	hl 							; undo the get, so points to the non space non zero byte.
C0C3: CDD3C0  			call 	CompileOne 					; compile word at HL.
              			;
C0C6:         	_CSNext:		
C0C6: 7E      			ld 		a,(hl) 						; advance forward to next word
C0C7: B7      			or 		a 							; if found $00 end of stream go back to CompileStream
C0C8: 28EC    			jr 		z,CompileStream
C0CA: 23      			inc 	hl
C0CB: E63F    			and 	#$3F 						; check for colour space
C0CD: FE20    			cp 		$20
C0CF: 20F5    			jr 		nz,_CSNext
C0D1: 18E3    			jr 		CompileStream 				; once found, try the next word.
              	
              	; ***************************************************************************************
              	;
              	; 						  Compile/Execute/Define word at HL.
              	;
              	; ***************************************************************************************
              	
C0D3:         	CompileOne:
C0D3: 2216C0  			ld 		(CurrentWord),hl 			; useful for debugging.
C0D6: 7E      			ld 		a,(hl) 						; get the word's colour.
C0D7: E6C0    			and 	$C0
C0D9: C8      			ret  	z 							; exit immediately if it's a comment word.
C0DA: E5      			push 	hl 							; save HL on stack
              	
C0DB: FEC0    			cp 		$C0 						; $40 and $80 , compile or execute, handled together
C0DD: 203B    			jr 		nz,_COExecuteCompile
              			;
              			; 		Create a new definition using the word at HL.
              			;
C0DF: 06FF    			ld 		b,$FF 						; we write it out backwards so go forward counting characters. We count the space so -1 here.
C0E1:         	_CDFindEnd:
C0E1: 04      			inc 	b 							; bump count
C0E2: 7E      			ld 		a,(hl) 						; get character		
C0E3: 23      			inc 	hl
C0E4: B7      			or 		a
C0E5: 2806    			jr 		z,_CDFoundEnd		 		; if zero, we're at the end
C0E7: E63F    			and 	$3F
C0E9: FE20    			cp 		$20
C0EB: 20F4    			jr 		nz,_CDFindEnd
C0ED:         	_CDFoundEnd:
              			;
              			; 		HL points one after the word end seperator, B is the count. C is the OR value for copying, which is only set 
              			; 		first time to $80
C0ED: 0E80    			ld 		c,$80 						; the copy OR value
C0EF: 2B      			dec 	hl 							; undo the get after getting the space.
C0F0:         	_CDCopyDictionary:
C0F0: 2B      			dec 	hl 							; get previous character. we are writing out backwards as we go down
C0F1: 7E      			ld 		a,(hl)
C0F2: E63F    			and 	$3F 						; colour dropped. (should be red)
C0F4: B1      			or 		c  							; OR C in, first time $80
C0F5: 0E00    			ld 		c,0 						; and next times it's only $00		
C0F7: CDDBC1  			call	CompileWriteDictionary 
C0FA: 10F4    			djnz 	_CDCopyDictionary 			; write out the whole word.
              			;
              			; 		Now create the rest of the record, the code address then type byte.
              			;
C0FC: 3A0BC0  			ld 		a,(CodeNextFree+1) 			; write out code MSB then LSB
C0FF: CDDBC1  			call	CompileWriteDictionary 
C102: 3A0AC0  			ld 		a,(CodeNextFree)
C105: CDDBC1  			call	CompileWriteDictionary 
C108: 3E80    			ld 		a,$80 						; then the default type byte
C10A: CDDBC1  			call	CompileWriteDictionary 
              	
C10D: 3ECD    			ld 		a,$CD 						; compile CALL CompileCallFollowing into code, the default action.
C10F: CDABC0  			call 	CompileByte 				; e.g. the word compiles a call to whatever follows it.
C112: 2192C0  			ld 		hl,CompileCallFollowing
C115: CD9CC0  			call 	CompileWord
              	
C118:         	_COPopHLExit:
C118: E1      			pop 	hl 							; restore HL and exit.
C119: C9      			ret
              	;
              	; 		Compile or execute the word at HL.
              	;
C11A:         	_COExecuteCompile:
C11A: E5      			push 	hl 							; save word text address
C11B: CDFDC1  			call 	SearchDictionary 			; try to find it in the dictionary
C11E: 7C      			ld 		a,h 						; was it found ?
C11F: B5      			or 		l
C120: 284B    			jr 		z,_CECUnknown
              			;
              			; 		Word in the dictionary.
              			;
C122: D1      			pop 	de 							; get word text back in DE
C123: CB46    			bit 	0,(hl) 						; is this execute only ?
C125: 2808    			jr 		z,_CECNotCompileOnly
C127: 1A      			ld 		a,(de)  					; what are we doing with it ?
C128: E6C0    			and 	$C0  						; get colour
C12A: FE80    			cp 		$80  						; if execute ?
C12C: CA54C0  			jp 		z,WordIsCompileOnly 		; then we have an error.
C12F:         	_CECNotCompileOnly:		
C12F: 1A      			ld 		a,(de) 						; get the word colour and save on the stack
C130: E6C0    			and 	$C0
C132: F5      			push	af
              	
C133: ED5B0AC0			ld 		de,(CodeNextFree) 			; save the current code position on the stack.
C137: D5      			push 	de 
              	
C138: CD67C1  			call 	_COCallRoutine 				; call the routine to compile what it does.
              	
C13B:         	_CEExecuteOrCompile:		
C13B: E1      			pop 	hl 							; restore code position at start to HL.
C13C: F1      			pop 	af 							; restore word colour.
              	
C13D: FE80    			cp 	 	$80 						; if not execute
C13F: 20D7    			jr 	 	nz,_COPopHLExit 			; then return, as we've done the compile
              	
C141: 3EC9    			ld 		a,$C9 						; this is the Z80 RET which we need to compile after the code
C143: CDABC0  			call 	CompileByte
C146: 220AC0  			ld 		(CodeNextFree),hl 			; reset the code pointer, as we don't want to keep this executed word.
              	
C149: 115AC1  			ld 		de,_CEXContinue 			; go here on return
C14C: D5      			push 	de
C14D: E5      			push 	hl 							; go here, the newly compiled code, first, this is for the RET below
              	
C14E: 2A10C0  			ld 		hl,(RegA) 					; load registers
C151: ED5B12C0			ld 		de,(RegB) 					
C155: ED4B14C0			ld 		bc,(RegC) 					
              	
C159: C9      			ret 								; execute the code, as we pushed HL - not actually returning :)
              	
C15A:         	_CEXContinue:
C15A: 2210C0  			ld 		(RegA),hl 					; save the registers
C15D: ED5312C0			ld 		(RegB),de
C161: ED4314C0			ld 		(RegC),bc
              	
C165: 18B1    			jr 		_COPopHLExit 				; pop HL and exit
              			;
              			; 		Call the routine to compile the code.
              			;
C167:         	_COCallRoutine:
C167: 23      			inc 	hl 							; call address into DE
C168: 5E      			ld 		e,(hl)
C169: 23      			inc 	hl
C16A: 56      			ld 		d,(hl)
C16B: EB      			ex 		de,hl 						; and go there
C16C:         	_COCallHL:		
C16C: E9      			jp 		(hl)
              			;
              			; 		Word not in the dictionary. Could be a constant or a string 
              			;
C16D:         	_CECUnknown:		
C16D: E1      			pop 	hl 							; restore word address.
C16E: 7E      			ld 		a,(hl) 						; look at the first character
C16F: E63F    			and 	$3F
C171: FE22    			cp 		$22 						; is it a quote, indicating a string.
C173: 2824    			jr 		z,_CSTRProcess 
              			;
              			; 		Now it must be a constant
              			;
C175: 7E      			ld 		a,(hl) 						; push the colour on the stack
C176: E6C0    			and 	$C0
C178: F5      			push 	af
C179: CD36C2  			call 	StringToInteger 			; convert a word to a valid integer.
C17C: 7A      			ld 		a,d 						; DE = 0 if fail.
C17D: B3      			or 		e
C17E: CA58C0  			jp 		z,UnknownWord 
              			;
C181: F1      			pop 	af  
C182: FE80    			cp 		$80 						; if execute, do execute constant.
C184: 2805    			jr 		z,_CECExecuteConstant
              			;
              			; 		Compile a constant inline.
              			;
C186:         	_CECCompileConstant:		
C186: CDEFC1  			call 	CompileLoadConstant
C189: 188D    			jr 		_COPopHLExit 				; and exit
              			;
              			; 		Do the equivalent of executing a constant e.g. swap A & B n=>A
              			;
C18B:         	_CECExecuteConstant:
C18B: ED5B10C0			ld 		de,(RegA) 					; A -> B
C18F: ED5312C0			ld 		(RegB),de
C193: 2210C0  			ld 		(RegA),hl 					; constant -> HL
C196: C318C1  			jp 		_COPopHLExit 				; and exit
              			;
              			; 		HL points to a string, prefixed by a ". Note, this is transient in execute mode.
              			;
C199:         	_CSTRProcess:
C199: 7E      			ld 		a,(hl) 						; push colour on stack
C19A: E6C0    			and 	$C0
C19C: F5      			push 	af
C19D: ED5B0AC0			ld 		de,(CodeNextFree) 			; save the current code position on the stack.
C1A1: D5      			push 	de 
              	
C1A2: E5      			push 	hl 							; save string address
C1A3: 3ECD    			ld 		a,$CD 						; compile CALL StringConstantHandler
C1A5: CDABC0  			call 	CompileByte 				
C1A8: 21E6C1  			ld 		hl,StringConstantHandler
C1AB: CD9CC0  			call 	CompileWord
C1AE: E1      			pop 	hl
C1AF: 23      			inc 	hl 							; skip over the initial single quote
C1B0:         	_CSTRLoop:
C1B0: 7E      			ld 		a,(hl) 						; reached the end ? either 00 orr coloured space.
C1B1: B7      			or 		a
C1B2: 2820    			jr 		z,_CSTRDone
C1B4: E63F    			and 	$3F
C1B6: FE20    			cp 		$20
C1B8: 281A    			jr 		z,_CSTRDone		
C1BA: EE20    			xor 	$20 						; convert back to ASCII 7 bit.
C1BC: C620    			add 	$20
C1BE: FE41    			cp 		'A' 						; make lower case as default.
C1C0: 3806    			jr 		c,_CSTRNotAlpha
C1C2: FE5B    			cp 		'Z'+1
C1C4: 3002    			jr 		nc,_CSTRNotAlpha
C1C6: C620    			add 	$20
C1C8:         	_CSTRNotAlpha:		
C1C8: FE5F    			cp 		'_' 						; map _ to space
C1CA: 2002    			jr 		nz,_CSTRNotBar
C1CC: 3E20    			ld 		a,' '
C1CE:         	_CSTRNotBar:		
C1CE: CDABC0  			call 	CompileByte  				; write out
C1D1: 23      			inc 	hl 							; next byte
C1D2: 18DC    			jr 		_CSTRLoop
C1D4:         	_CSTRDone:
C1D4: AF      			xor 	a 							; write $00 end of string
C1D5: CDABC0  			call 	CompileByte
C1D8: C33BC1  			jp 		_CEExecuteOrCompile 		; and go do it, perhaps.		
              	
              	; ***************************************************************************************
              	;
              	; 						Write dictionary word out working downwards
              	;
              	; ***************************************************************************************
              	
C1DB:         	CompileWriteDictionary:
C1DB: E5      			push 	hl
C1DC: 2A0EC0  			ld 		hl,(DictionaryBase) 		; hence pre-decrement address.
C1DF: 2B      			dec 	hl
C1E0: 77      			ld 		(hl),a
C1E1: 220EC0  			ld 		(DictionaryBase),hl
C1E4: E1      			pop 	hl
C1E5: C9      			ret
              	
              	; ***************************************************************************************
              	;
              	;					 Put in HL the ASCIIZ constant following
              	;
              	; ***************************************************************************************
              	
C1E6:         	StringConstantHandler:
C1E6: E1      			pop 	hl 							; get the return address into HL, leave on stack		
C1E7: E5      			push 	hl
C1E8:         	_SCHEnd: 									; advance HL past the string
C1E8: 7E      			ld 		a,(hl)
C1E9: 23      			inc 	hl
C1EA: B7      			or 		a
C1EB: 20FB    			jr 		nz,_SCHEnd		
C1ED: E3      			ex 		(sp),hl 					; swap them round, so HL = start and (SP) is the byte after
C1EE: C9      			ret
              	
              	; ***************************************************************************************
              	;
              	;						Compile code to load HL as a constant
              	;
              	; ***************************************************************************************
              	
C1EF:         	CompileLoadConstant:
C1EF: 3EEB    			ld 		a,$EB 						; compile EX DE,HL
C1F1: CDABC0  			call 	CompileByte
C1F4: 3E21    			ld 		a,$21 						; LD HL,xxxxx
C1F6: CDABC0  			call 	CompileByte
C1F9: CD9CC0  			call 	CompileWord 				; compile the number to load
C1FC: C9      			ret
              			.include 	"search.asm"
              	; ***************************************************************************************
              	; ***************************************************************************************
              	;
              	;		Name : 		find.asm
              	;		Author :	Paul Robson (paul@robsons.org.uk)
              	;		Date : 		16th October 2021
              	;		Purpose :	Search dictionary
              	;
              	; ***************************************************************************************
              	; ***************************************************************************************
              	
              	; ***************************************************************************************
              	;
              	; 		Search dictionary for word at HL, which is internal format (2+6 ended with 
              	;		(2+space or $00). On exit HL points to the type byte or $0000 if not found.
              	;
              	; ***************************************************************************************
              	
C1FD:         	SearchDictionary:
C1FD: C5      			push 	bc
C1FE: D5      			push 	de
C1FF: EB      			ex 		de,hl 						; put search string address in DE.
C200: 2A0EC0  			ld 		hl,(DictionaryBase) 		; HL points to dictionary base.
              			;
              			; 		Compare entry at HL vs word at DE
              			;
C203:         	_SearchLoop:
C203: 44      			ld 		b,h 						; copy current being searched to BC
C204: 4D      			ld 		c,l 								
C205: 7E      			ld 		a,(hl) 						; get the type byte.
C206: B7      			or 	 	a 							; if zero, then fail as we've reached dictionary end.
C207: 2827    			jr 		z,_SDFail
              			;
C209: 23      			inc  	hl 							; point to the first character
C20A: 23      			inc 	hl 							; e.g. skip type byte and call address.
C20B: 23      			inc 	hl
C20C: D5      			push 	de 							; save search string address on stack.
              			;
              			; 		Compare string at HL vs String at DE
              			;
C20D:         	_SearchCompare:
C20D: 1A      			ld 		a,(de) 						; calculate xor of two characters
C20E: AE      			xor 	(hl) 						; as we're only interested in lower 6 bits for compare
C20F: E63F    			and 	$3F 						; check lower 6 bits only.
C211: 2015    			jr 		nz,_SearchNext 				; different, go to next word.
C213: 7E      			ld 		a,(hl) 						; get dictionary byte successfully matched.
C214: 13      			inc 	de 							; advance to next.
C215: 23      			inc 	hl 		
C216: 87      			add 	a,a 						; is bit 7 in the last match, indicating the last character of the word in the dictionary ?
C217: 30F4    			jr 		nc,_SearchCompare 			; no, keep comparing
              			;
              			; 		Found the end of the word in the dictionary, HL points to the byte following, DE the character following.
              			;	 	We need to check it's the end of the word in the search text.
              			;
C219: 1A      			ld 		a,(de) 						; get the next character in the search word.
C21A: D1      			pop 	de 							; having got the character, restore DE to original value.
C21B: B7      			or 		a 							; is it $00 or xx10000 (any colour space)
C21C: 2806    			jr 		z,_SDSucceed 				; if zero, we've found the word, end of buffer
C21E: E63F    			and 	$3F 
C220: FE20    			cp 		$20
C222: 20DF    			jr 		nz,_SearchLoop 				; no it wasn't any Space so go round again. HL points to the next type byte already.
C224:         	_SDSucceed: 
C224: 60      			ld 		h,b 						; restore value saved in BC to HL, the type byte address of the found word.
C225: 69      			ld 		l,c  						; at the start, e.g. the address of the type byte.
C226: 180B    			jr 		_SDExit
              			;
              			; 		Names did not match. HL still points into the word.
              			;
C228:         	_SearchNext:
C228: 7E      			ld 		a,(hl) 						; get and bump in dictionary
C229: 23      			inc 	hl
C22A: 87      			add 	a,a 						; looking for the bit 7 set indicating the end of the word
C22B: 30FB    			jr 		nc,_SearchNext  			
C22D: D1      			pop 	de 							; restore DE, the address of the input word
C22E: 18D3    			jr 		_SearchLoop 				; and try the next dictionary word.
              	;
C230:         	_SDFail:									; not found, return zero
C230: 210000  			ld 		hl,$0000 					
C233:         	_SDExit:
C233: D1      			pop 	de
C234: C1      			pop 	bc		
C235: C9      			ret		
              	
              	
              			.include 	"toint.asm"
              	; ***************************************************************************************
              	; ***************************************************************************************
              	;
              	;		Name : 		toint.asm
              	;		Author :	Paul Robson (paul@robsons.org.uk)
              	;		Date : 		16th October 2021
              	;		Purpose :	Convert a word to an integer.
              	;
              	; ***************************************************************************************
              	; ***************************************************************************************
              	
              	; ***************************************************************************************
              	;
              	;		Convert word to integer. Can be decimal $hexadecimal and prefixed with '-'
              	;		Result in HL, DE is non-zero if successful.
              	;
              	; ***************************************************************************************
              	
C236:         	StringToInteger:
C236: 7E      			ld 		a,(hl) 						; check for - x
C237: E63F    			and 	$3F
C239: FE2D    			cp 		'-'
C23B: 200C    			jr 		nz,_STOInt
C23D: 23      			inc 	hl 							; skip the - sign. 
C23E: CD49C2  			call 	_STOInt 					; try to convert to integer
              	
C241: 7C      			ld 		a,h 						; negate the result.
C242: 2F      			cpl 
C243: 67      			ld 		h,a
C244: 7D      			ld 		a,l
C245: 2F      			cpl
C246: 6F      			ld 		l,a
C247: 23      			inc 	hl
C248: C9      			ret
              	
C249: DDE5    	_STOInt:push 	ix 							; save IX
              			
              	
C24B: E5      			push 	hl 							; copy word address to IX
C24C: DDE1    			pop 	ix		
C24E: 01000A  			ld 		bc,10*256 					; base in B, count in C
C251: 210000  			ld 		hl,0 						; result in HL.
              			;
C254: DD7E00  			ld 		a,(ix+0) 					; is first character a '$'
C257: E63F    			and 	$3F
C259: FE24    			cp 		'$'
C25B: 2004    			jr 		nz,_STONotHex 
              			;
C25D: 0610    			ld 		b,16 						; now Base 16.
C25F: DD23    			inc 	ix 							; skip over the '$'
C261:         	_STONotHex:
              			;
              			; 		Main processing loop.
              			;		
C261:         	_STOLoop:
C261: DD7E00  			ld 		a,(ix+0) 					; get character
C264: DD23    			inc 	ix
C266: B7      			or 		a  							; check for $00 or Coloured space
C267: 282F    			jr 		z,_STOEndWord 					
C269: E63F    			and 	$3F
C26B: FE20    			cp 		$20
C26D: 2829    			jr 		z,_STOEndWord
              			;
C26F: FE3A    			cp 		'9'+1 						; if > 9 then fail
C271: 3029    			jr 		nc,_STOFail
C273: FE30    			cp 		'0'
C275: 3009    			jr 		nc,_STOOkay
C277: FE07    			cp 		6+1 						; if > F then fail
C279: 3021    			jr 		nc,_STOFail
C27B: B7      			or 		a
C27C: 281E    			jr 		z,_STOFail 					; $00 is a fail too.
C27E: C609    			add 	9 							; maps A ($01) to ($0A) etc.
C280:         	_STOOkay:
C280: 0C      			inc 	c 							; increment successful char count		
C281: E60F    			and 	$0F 						; make digit in range 0..15
C283: B8      			cp 		b 							; fail if >= the base
C284: 3016    			jr 		nc,_STOFail
              			;
C286: 29      			add 	hl,hl 						; HL = 2 * HL
C287: 5D      			ld 		e,l 						; DE = 2 * HL
C288: 54      			ld 		d,h		
C289: 29      			add 	hl,hl 						; HL = 4 * HL
C28A: 29      			add 	hl,hl 						; HL = 8 * HL
C28B: CB60    			bit 	4,b 						; is base 16 ?
C28D: 2802    			jr 		z,_STONotHexMult
C28F: 5D      			ld 		e,l 						; if base 16 HL = DE = 8 * HL
C290: 54      			ld 		d,h
C291:         	_STONotHexMult:
C291: 19      			add 	hl,de 						; so HL = HL * 10 or * 16 depending on B
C292: 5F      			ld 		e,a 						; put digit in DE and add
C293: 1600    			ld 		d,0
C295: 19      			add 	hl,de
C296: 18C9    			jr 		_STOLoop
              	;
C298:         	_STOEndWord:
C298: 59      			ld 		e,c 						; E is 0 if no chars, e.g. fail or #0 if chars consumed
C299: 51      			ld 		d,c 						; D the same
C29A: 1806    			jr 		_STOExit 					; and exit
              	
C29C:         	_STOFail:	 								; can't do it, return DE = HL = 0	
C29C: 110000  			ld 		de,0
C29F: 210000  			ld 		hl,0
C2A2:         	_STOExit:		
C2A2: DDE1    			pop 	ix 							; restore IX and exit
C2A4: C9      			ret
              	
              			
              		
              	
              	; ***************************************************************************************
              	;
              	; 							Autogenerated Vocabulary file
              	;
              	; ***************************************************************************************
              	
              		.include 	"vocabulary/vocabulary.asm"
              	; --------------------------------------
              	;             <
              	; --------------------------------------
C2A5:         	word_1000:
C2A5: CD92C0  		call	CompileCallFollowing
C2A8: 7C      	 ld   a,h           ; check if signs different.
C2A9: AA      	 xor  d
C2AA: 87      	 add  a,a          ; CS if different
C2AB: 3004    	 jr   nc,__less_samesign
C2AD: 7A      	 ld   a,d          ; different. set CS to sign of B
C2AE: 87      	 add  a,a          ; if set (negative) B must be < A as A is +ve
C2AF: 1805    	 jr   __less_returnc
C2B1:         	__less_samesign:
C2B1: D5      	 push  de           ; save DE
C2B2: EB      	 ex   de,hl          ; -1 if B < A
C2B3: ED52    	 sbc  hl,de          ; calculate B - A , hencs CS if < (Carry clear by add a,a)
C2B5: D1      	 pop  de           ; restore DE
C2B6:         	__less_returnc:
C2B6: 3E00    	 ld   a,0          ; A 0
C2B8: DE00    	 sbc  a,0          ; A $FF if CS.
C2BA: 6F      	 ld   l,a          ; put in HL
C2BB: 67      	 ld   h,a
C2BC: C9      	 ret
              	; --------------------------------------
              	;             =
              	; --------------------------------------
C2BD:         	word_1001:
C2BD: CD92C0  		call	CompileCallFollowing
C2C0: 7C      	 ld   a,h          ; H = H ^ D
C2C1: AA      	 xor  d
C2C2: 67      	 ld   h,a
C2C3: 7D      	 ld   a,l          ; A = (L ^ E) | (H ^ D)
C2C4: AB      	 xor  e
C2C5: B4      	 or   h           ; if A == 0 they are the same.
C2C6: 210000  	 ld   hl,$0000         ; return 0 if different
C2C9: C0      	 ret  nz
C2CA: 2B      	 dec  hl           ; return -1
C2CB: C9      	 ret
              	; --------------------------------------
              	;             -
              	; --------------------------------------
C2CC:         	word_1002:
C2CC: CD92C0  		call	CompileCallFollowing
C2CF: D5      	 push  de           ; save DE
C2D0: EB      	 ex   de,hl          ; HL = B, DE = A
C2D1: AF      	 xor  a            ; clear carry
C2D2: ED52    	 sbc  hl,de          ; calculate B-A
C2D4: D1      	 pop  de           ; restore DE
C2D5: C9      	 ret
              	; --------------------------------------
              	;             +
              	; --------------------------------------
C2D6:         	word_1003:
C2D6: CD85C0  		call	CopyFollowing
C2D9: 01      		.db	endcopy_1003 - $ - 1
C2DA: 19      	 add  hl,de
C2DB:         	endcopy_1003:
              	; --------------------------------------
              	;             AND
              	; --------------------------------------
C2DB:         	word_1004:
C2DB: CD92C0  		call	CompileCallFollowing
C2DE: 7C      	 ld   a,h
C2DF: A2      	 and  d
C2E0: 67      	 ld   h,a
C2E1: 7D      	 ld   a,l
C2E2: A3      	 and  e
C2E3: 6F      	 ld   l,a
C2E4: C9      	 ret
              	; --------------------------------------
              	;             OR
              	; --------------------------------------
C2E5:         	word_1005:
C2E5: CD92C0  		call	CompileCallFollowing
C2E8: 7C      	 ld   a,h
C2E9: B2      	 or   d
C2EA: 67      	 ld   h,a
C2EB: 7D      	 ld   a,l
C2EC: B3      	 or   e
C2ED: 6F      	 ld   l,a
C2EE: C9      	 ret
              	; --------------------------------------
              	;             XOR
              	; --------------------------------------
C2EF:         	word_1006:
C2EF: CD92C0  		call	CompileCallFollowing
C2F2: 7C      	 ld   a,h
C2F3: AA      	 xor  d
C2F4: 67      	 ld   h,a
C2F5: 7D      	 ld   a,l
C2F6: AB      	 xor  e
C2F7: 6F      	 ld   l,a
C2F8: C9      	 ret
              	; --------------------------------------
              	;             /
              	; --------------------------------------
C2F9:         	word_1007:
C2F9: CD92C0  		call	CompileCallFollowing
C2FC: D5      	 push  de
C2FD: CD1BC5  	 call  DIVDivideMod16
C300: EB      	 ex   de,hl
C301: D1      	 pop  de
C302: C9      	 ret
              	; --------------------------------------
              	;             MOD
              	; --------------------------------------
C303:         	word_1008:
C303: CD92C0  		call	CompileCallFollowing
C306: D5      	 push  de
C307: CD1BC5  	 call  DIVDivideMod16
C30A: D1      	 pop  de
C30B: C9      	 ret
              	; --------------------------------------
              	;             !
              	; --------------------------------------
C30C:         	word_1009:
C30C: CD85C0  		call	CopyFollowing
C30F: 04      		.db	endcopy_1009 - $ - 1
C310: 73      	  ld   (hl),e
C311: 23      	  inc  hl
C312: 72      	  ld   (hl),d
C313: 2B      	  dec  hl
C314:         	endcopy_1009:
              	; --------------------------------------
              	;             @
              	; --------------------------------------
C314:         	word_1010:
C314: CD85C0  		call	CopyFollowing
C317: 04      		.db	endcopy_1010 - $ - 1
C318: 7E      	  ld   a,(hl)
C319: 23      	  inc  hl
C31A: 66      	  ld  h,(hl)
C31B: 6F      	  ld  l,a
C31C:         	endcopy_1010:
              	; --------------------------------------
              	;             +!
              	; --------------------------------------
C31C:         	word_1011:
C31C: CD92C0  		call	CompileCallFollowing
C31F: 7E      	  ld   a,(hl)
C320: 83      	  add  a,e
C321: 77      	  ld   (hl),a
C322: 23      	  inc  hl
C323: 7E      	  ld   a,(hl)
C324: 8A      	  adc  a,d
C325: 77      	  ld   (hl),a
C326: 2B      	  dec  hl
C327: C9      	  ret
              	; --------------------------------------
              	;             C!
              	; --------------------------------------
C328:         	word_1012:
C328: CD85C0  		call	CopyFollowing
C32B: 01      		.db	endcopy_1012 - $ - 1
C32C: 73      	  ld   (hl),e
C32D:         	endcopy_1012:
              	; --------------------------------------
              	;             C@
              	; --------------------------------------
C32D:         	word_1013:
C32D: CD85C0  		call	CopyFollowing
C330: 03      		.db	endcopy_1013 - $ - 1
C331: 6E      	  ld   l,(hl)
C332: 2600    	  ld   h,0
C334:         	endcopy_1013:
              	; --------------------------------------
              	;             P@
              	; --------------------------------------
C334:         	word_1014:
C334: CD85C0  		call	CopyFollowing
C337: 04      		.db	endcopy_1014 - $ - 1
C338: ED68    	  in   l,(c)
C33A: 2600    	  ld   h,0
C33C:         	endcopy_1014:
              	; --------------------------------------
              	;             P!
              	; --------------------------------------
C33C:         	word_1015:
C33C: CD85C0  		call	CopyFollowing
C33F: 02      		.db	endcopy_1015 - $ - 1
C340: ED69    	  out  (c),l
C342:         	endcopy_1015:
              	; --------------------------------------
              	;             ,
              	; --------------------------------------
C342:         	word_1016:
C342: CD92C0  		call	CompileCallFollowing
C345: C39CC0  	  jp   CompileWord
              	; --------------------------------------
              	;             ;
              	; --------------------------------------
C348:         	word_1017:
C348: 3EC9    	  ld   a,$C9         ; compile a RET
C34A: CDABC0  	  call  CompileByte
              	  ; TODO: Check close to $E000,  so we can skip the ROM header.
C34D: C9      	  ret
              	; --------------------------------------
              	;             C,
              	; --------------------------------------
C34E:         	word_1018:
C34E: CD92C0  		call	CompileCallFollowing
C351: 7D      	  ld   a,l
C352: C3ABC0  	  jp   CompileByte
              	; --------------------------------------
              	;             COPY
              	; --------------------------------------
C355:         	word_1019:
C355: CD92C0  		call	CompileCallFollowing
C358: 78      	  ld   a,b         ; exit if C = 0
C359: B1      	  or   c
C35A: C8      	  ret  z
              	
C35B: C5      	  push  bc          ; BC count
C35C: D5      	  push  de          ; DE target
C35D: E5      	  push  hl          ; HL source
              	
C35E: AF      	  xor  a          ; Clear C
C35F: ED52    	  sbc  hl,de         ; check overlap ?
C361: 300B    	  jr   nc,__copy_gt_count      ; if source after target
C363: 19      	  add  hl,de         ; undo subtract
              	
C364: 09      	  add  hl,bc         ; add count to HL + DE
C365: EB      	  ex   de,hl
C366: 09      	  add  hl,bc
C367: EB      	  ex   de,hl
C368: 1B      	  dec  de          ; dec them, so now at the last byte to copy
C369: 2B      	  dec  hl
C36A: EDB8    	  lddr           ; do it backwards
C36C: 1803    	  jr   __copy_exit
              	
C36E:         	__copy_gt_count:
C36E: 19      	  add  hl,de         ; undo subtract
C36F: EDB0    	  ldir          ; do the copy
C371:         	__copy_exit:
C371: E1      	  pop  hl          ; restore registers
C372: D1      	  pop  de
C373: C1      	  pop  bc
C374: C9      	  ret
              	; --------------------------------------
              	;             FILL
              	; --------------------------------------
C375:         	word_1020:
C375: CD92C0  		call	CompileCallFollowing
C378: 78      	  ld   a,b         ; exit if C = 0
C379: B1      	  or   c
C37A: C8      	  ret  z
              	
C37B: C5      	  push  bc          ; BC count
C37C: D5      	  push  de          ; DE target, L byte
C37D:         	__fill_loop:
C37D: 7D      	  ld   a,l         ; copy a byte
C37E: 12      	  ld   (de),a
C37F: 13      	  inc  de          ; bump pointer
C380: 0B      	  dec  bc          ; dec counter and loop
C381: 78      	  ld   a,b
C382: B1      	  or   c
C383: 20F8    	  jr   nz,__fill_loop
C385: D1      	  pop  de          ; restore
C386: C1      	  pop  bc
C387: C9      	  ret
              	; --------------------------------------
              	;             HALT
              	; --------------------------------------
C388:         	word_1021:
C388: CD92C0  		call	CompileCallFollowing
C38B:         	__halt_loop:
C38B: F3      	  di
C38C: 76      	  halt
C38D: 18FC    	  jr   __halt_loop
              	; --------------------------------------
              	;             BREAK
              	; --------------------------------------
C38F:         	word_1022:
C38F: CD85C0  		call	CopyFollowing
C392: 01      		.db	endcopy_1022 - $ - 1
C393: 76      	  db   $76
C394:         	endcopy_1022:
              	; --------------------------------------
              	;             *
              	; --------------------------------------
C394:         	word_1023:
C394: CD92C0  		call	CompileCallFollowing
C397: C346C5  	 jp   MULTMultiply16
              	; --------------------------------------
              	;             SWAP
              	; --------------------------------------
C39A:         	word_1024:
C39A: CD85C0  		call	CopyFollowing
C39D: 01      		.db	endcopy_1024 - $ - 1
C39E: EB      	  ex   de,hl
C39F:         	endcopy_1024:
              	; --------------------------------------
              	;             A>B
              	; --------------------------------------
C39F:         	word_1025:
C39F: CD85C0  		call	CopyFollowing
C3A2: 02      		.db	endcopy_1025 - $ - 1
C3A3: 54      	  ld   d,h
C3A4: 5D      	  ld   e,l
C3A5:         	endcopy_1025:
              	; --------------------------------------
              	;             A>C
              	; --------------------------------------
C3A5:         	word_1026:
C3A5: CD85C0  		call	CopyFollowing
C3A8: 02      		.db	endcopy_1026 - $ - 1
C3A9: 44      	  ld   b,h
C3AA: 4D      	  ld   c,l
C3AB:         	endcopy_1026:
              	; --------------------------------------
              	;             B>A
              	; --------------------------------------
C3AB:         	word_1027:
C3AB: CD85C0  		call	CopyFollowing
C3AE: 02      		.db	endcopy_1027 - $ - 1
C3AF: 62      	  ld   h,d
C3B0: 6B      	  ld   l,e
C3B1:         	endcopy_1027:
              	; --------------------------------------
              	;             B>C
              	; --------------------------------------
C3B1:         	word_1028:
C3B1: CD85C0  		call	CopyFollowing
C3B4: 02      		.db	endcopy_1028 - $ - 1
C3B5: 42      	  ld   b,d
C3B6: 4B      	  ld   c,e
C3B7:         	endcopy_1028:
              	; --------------------------------------
              	;             C>A
              	; --------------------------------------
C3B7:         	word_1029:
C3B7: CD85C0  		call	CopyFollowing
C3BA: 02      		.db	endcopy_1029 - $ - 1
C3BB: 60      	  ld   h,b
C3BC: 69      	  ld   l,c
C3BD:         	endcopy_1029:
              	; --------------------------------------
              	;             C>B
              	; --------------------------------------
C3BD:         	word_1030:
C3BD: CD85C0  		call	CopyFollowing
C3C0: 02      		.db	endcopy_1030 - $ - 1
C3C1: 50      	  ld   d,b
C3C2: 59      	  ld   e,c
C3C3:         	endcopy_1030:
              	; --------------------------------------
              	;             PUSH
              	; --------------------------------------
C3C3:         	word_1031:
C3C3: CD85C0  		call	CopyFollowing
C3C6: 01      		.db	endcopy_1031 - $ - 1
C3C7: E5      	 push  hl
C3C8:         	endcopy_1031:
              	; --------------------------------------
              	;             POP
              	; --------------------------------------
C3C8:         	word_1032:
C3C8: CD85C0  		call	CopyFollowing
C3CB: 02      		.db	endcopy_1032 - $ - 1
C3CC: EB      	 ex   de,hl
C3CD: E1      	 pop  hl
C3CE:         	endcopy_1032:
              	; --------------------------------------
              	;             A>R
              	; --------------------------------------
C3CE:         	word_1033:
C3CE: CD85C0  		call	CopyFollowing
C3D1: 01      		.db	endcopy_1033 - $ - 1
C3D2: E5      	 push  hl
C3D3:         	endcopy_1033:
              	; --------------------------------------
              	;             R>A
              	; --------------------------------------
C3D3:         	word_1034:
C3D3: CD85C0  		call	CopyFollowing
C3D6: 01      		.db	endcopy_1034 - $ - 1
C3D7: E1      	 pop  hl
C3D8:         	endcopy_1034:
              	; --------------------------------------
              	;             B>R
              	; --------------------------------------
C3D8:         	word_1035:
C3D8: CD85C0  		call	CopyFollowing
C3DB: 01      		.db	endcopy_1035 - $ - 1
C3DC: D5      	 push  de
C3DD:         	endcopy_1035:
              	; --------------------------------------
              	;             R>B
              	; --------------------------------------
C3DD:         	word_1036:
C3DD: CD85C0  		call	CopyFollowing
C3E0: 01      		.db	endcopy_1036 - $ - 1
C3E1: D1      	 pop  de
C3E2:         	endcopy_1036:
              	; --------------------------------------
              	;             C>R
              	; --------------------------------------
C3E2:         	word_1037:
C3E2: CD85C0  		call	CopyFollowing
C3E5: 01      		.db	endcopy_1037 - $ - 1
C3E6: C5      	 push  bc
C3E7:         	endcopy_1037:
              	; --------------------------------------
              	;             R>C
              	; --------------------------------------
C3E7:         	word_1038:
C3E7: CD85C0  		call	CopyFollowing
C3EA: 01      		.db	endcopy_1038 - $ - 1
C3EB: C1      	 pop  bc
C3EC:         	endcopy_1038:
              	; --------------------------------------
              	;             AB>R
              	; --------------------------------------
C3EC:         	word_1039:
C3EC: CD85C0  		call	CopyFollowing
C3EF: 02      		.db	endcopy_1039 - $ - 1
C3F0: D5      	 push  de
C3F1: E5      	 push  hl
C3F2:         	endcopy_1039:
              	; --------------------------------------
              	;             R>AB
              	; --------------------------------------
C3F2:         	word_1040:
C3F2: CD85C0  		call	CopyFollowing
C3F5: 02      		.db	endcopy_1040 - $ - 1
C3F6: E1      	 pop  hl
C3F7: D1      	 pop  de
C3F8:         	endcopy_1040:
              	; --------------------------------------
              	;             ABC>R
              	; --------------------------------------
C3F8:         	word_1041:
C3F8: CD85C0  		call	CopyFollowing
C3FB: 03      		.db	endcopy_1041 - $ - 1
C3FC: C5      	 push  bc
C3FD: D5      	 push  de
C3FE: E5      	 push  hl
C3FF:         	endcopy_1041:
              	; --------------------------------------
              	;             R>ABC
              	; --------------------------------------
C3FF:         	word_1042:
C3FF: CD85C0  		call	CopyFollowing
C402: 03      		.db	endcopy_1042 - $ - 1
C403: E1      	 pop  hl
C404: D1      	 pop  de
C405: C1      	 pop  bc
C406:         	endcopy_1042:
              	; --------------------------------------
              	;             H
              	; --------------------------------------
C406:         	word_1043:
C406: CD85C0  		call	CopyFollowing
C409: 04      		.db	endcopy_1043 - $ - 1
C40A: EB      	  ex  de,hl
C40B: 210AC0  	  ld  hl,CodeNextFree
C40E:         	endcopy_1043:
              	; --------------------------------------
              	;             $SYSTEM
              	; --------------------------------------
C40E:         	word_1044:
C40E: CD85C0  		call	CopyFollowing
C411: 04      		.db	endcopy_1044 - $ - 1
C412: EB      	  ex  de,hl
C413: 2104C0  	  ld  hl,InformationBlock
C416:         	endcopy_1044:
              	; --------------------------------------
              	;             WARM.START
              	; --------------------------------------
C416:         	word_1045:
C416: CD92C0  		call	CompileCallFollowing
C419: C333C0  	  jp   WarmStart
              	; --------------------------------------
              	;             REPORT.ERROR
              	; --------------------------------------
C41C:         	word_1046:
C41C: CD92C0  		call	CompileCallFollowing
C41F: C33EC0  	  jp   Interface
              	; --------------------------------------
              	;             $COMPILER
              	; --------------------------------------
C422:         	word_1047:
C422: CD92C0  		call	CompileCallFollowing
C425: C3B6C0  	  jp   CompileStream
              	; --------------------------------------
              	;             CONSTANT
              	; --------------------------------------
C428:         	word_1048:
C428: 2A0AC0  	  ld   hl,(CodeNextFree)    ; fix up definition to remove call address.
C42B: 2B      	  dec  hl
C42C: 2B      	  dec  hl
C42D: 220AC0  	  ld   (CodeNextFree),hl    ; keeping the CALL opcode.
              	  ;
C430: 2160C5  	  ld   hl,ConstantHandler    ; make it CALL ConstantHandler
C433: CD9CC0  	  call  CompileWord
C436: 2A10C0  	  ld   hl,(RegA)     ; and put the word in after.
C439: CD9CC0  	  call  CompileWord
C43C: C9      	  ret
              	; --------------------------------------
              	;             VARIABLE
              	; --------------------------------------
C43D:         	word_1049:
C43D: 2A0AC0  	  ld   hl,(CodeNextFree)    ; fix up definition to remove call address.
C440: 2B      	  dec  hl
C441: 2B      	  dec  hl
C442: 220AC0  	  ld   (CodeNextFree),hl    ; keeping the CALL opcode.
              	  ;
C445: 2173C5  	  ld   hl,VariableHandler    ; make it CALL VariableHandler
C448: CD9CC0  	  call  CompileWord
C44B: 210000  	  ld   hl,$0000     ; initialise to zero.
C44E: CD9CC0  	  call  CompileWord
C451: C9      	  ret
              	; --------------------------------------
              	;             ARRAY
              	; --------------------------------------
C452:         	word_1050:
C452: 2A0AC0  	  ld   hl,(CodeNextFree)    ; fix up definition to remove call address.
C455: 2B      	  dec  hl
C456: 2B      	  dec  hl
C457: 220AC0  	  ld   (CodeNextFree),hl    ; keeping the CALL opcode.
              	  ;
C45A: 2173C5  	  ld   hl,VariableHandler    ; make it CALL VariableHandler
C45D: CD9CC0  	  call  CompileWord
              	
C460: 2A10C0  	  ld   hl,(RegA)     ; initialise to zero.
C463:         	_MakeArray:
C463: 7C      	  ld   a,h
C464: B5      	  or   l
C465: C8      	  ret  z
C466: 2B      	  dec  hl
C467: AF      	  xor  a
C468: CDABC0  	  call  CompileByte
C46B: 18F6    	  jr   _MakeArray
C46D: C9      	  ret
              	; --------------------------------------
              	;             ADDRESS.OF
              	; --------------------------------------
C46E:         	word_1051:
C46E: D5      	  push  de
C46F: E5      	  push  hl
C470: 2A0AC0  	  ld   hl,(CodeNextFree)    ; get previous code address
C473: 2B      	  dec  hl
C474: 56      	  ld   d,(hl)
C475: 2B      	  dec  hl
C476: 5E      	  ld   e,(hl)
C477: 2B      	  dec  hl
C478: 220AC0  	  ld   (CodeNextFree),hl    ; we've removed the word, address is in DE
C47B: EB      	  ex   de,hl
C47C: CDEFC1  	  call  CompileLoadConstant
C47F: E1      	  pop  hl
C480: D1      	  pop  de
C481: C9      	  ret
              	; --------------------------------------
              	;             !!
              	; --------------------------------------
C482:         	word_1052:
C482: 2A0AC0  	  ld   hl,(CodeNextFree)    ; we save one byte.
C485: 2B      	  dec  hl
C486: 220AC0  	  ld   (CodeNextFree),hl
              	  ;
C489: 46      	  ld   b,(hl)
C48A: 2B      	  dec  hl
C48B: 4E      	  ld   c,(hl)
C48C: 70      	  ld   (hl),b
C48D: 2B      	  dec  hl
C48E: 71      	  ld   (hl),c
C48F: 2B      	  dec  hl
C490: 3622    	  ld   (hl),$22
C492: C9      	  ret
              	; --------------------------------------
              	;             @@
              	; --------------------------------------
C493:         	word_1053:
C493: 2A0AC0  	  ld   hl,(CodeNextFree)    ; we save one byte.
              	  ;
C496: 2B      	  dec  hl
C497: 2B      	  dec  hl
C498: 2B      	  dec  hl
C499: 362A    	  ld   (hl),$2A
C49B: C9      	  ret
              	; --------------------------------------
              	;             ---
              	; --------------------------------------
C49C:         	word_1054:
C49C: CD85C0  		call	CopyFollowing
C49F: 02      		.db	endcopy_1054 - $ - 1
C4A0: 2B      	  dec  hl
C4A1: 2B      	  dec  hl
C4A2:         	endcopy_1054:
              	; --------------------------------------
              	;             --
              	; --------------------------------------
C4A2:         	word_1055:
C4A2: CD85C0  		call	CopyFollowing
C4A5: 01      		.db	endcopy_1055 - $ - 1
C4A6: 2B      	  dec  hl
C4A7:         	endcopy_1055:
              	; --------------------------------------
              	;             ++
              	; --------------------------------------
C4A7:         	word_1056:
C4A7: CD85C0  		call	CopyFollowing
C4AA: 01      		.db	endcopy_1056 - $ - 1
C4AB: 23      	  inc  hl
C4AC:         	endcopy_1056:
              	; --------------------------------------
              	;             +++
              	; --------------------------------------
C4AC:         	word_1057:
C4AC: CD85C0  		call	CopyFollowing
C4AF: 02      		.db	endcopy_1057 - $ - 1
C4B0: 23      	  inc  hl
C4B1: 23      	  inc  hl
C4B2:         	endcopy_1057:
              	; --------------------------------------
              	;             0-
              	; --------------------------------------
C4B2:         	word_1058:
C4B2: CD92C0  		call	CompileCallFollowing
C4B5:         	__negate:
C4B5: 7C      	  ld   a,h
C4B6: 2F      	  cpl
C4B7: 67      	  ld   h,a
C4B8: 7D      	  ld   a,l
C4B9: 2F      	  cpl
C4BA: 6F      	  ld   l,a
C4BB: 23      	  inc  hl
C4BC: C9      	  ret
              	; --------------------------------------
              	;             0<
              	; --------------------------------------
C4BD:         	word_1059:
C4BD: CD92C0  		call	CompileCallFollowing
C4C0: CB7C    	  bit  7,h
C4C2: 210000  	  ld   hl,$0000
C4C5: C8      	  ret  z
C4C6: 2B      	  dec  hl
C4C7: C9      	  ret
              	; --------------------------------------
              	;             0=
              	; --------------------------------------
C4C8:         	word_1060:
C4C8: CD92C0  		call	CompileCallFollowing
C4CB: 7C      	  ld   a,h
C4CC: B5      	  or   l
C4CD: 210000  	  ld   hl,$0000
C4D0: C0      	  ret  nz
C4D1: 2B      	  dec  hl
C4D2: C9      	  ret
              	; --------------------------------------
              	;             2*
              	; --------------------------------------
C4D3:         	word_1061:
C4D3: CD85C0  		call	CopyFollowing
C4D6: 01      		.db	endcopy_1061 - $ - 1
C4D7: 29      	  add  hl,hl
C4D8:         	endcopy_1061:
              	; --------------------------------------
              	;             4*
              	; --------------------------------------
C4D8:         	word_1062:
C4D8: CD85C0  		call	CopyFollowing
C4DB: 02      		.db	endcopy_1062 - $ - 1
C4DC: 29      	  add  hl,hl
C4DD: 29      	  add  hl,hl
C4DE:         	endcopy_1062:
              	; --------------------------------------
              	;             8*
              	; --------------------------------------
C4DE:         	word_1063:
C4DE: CD85C0  		call	CopyFollowing
C4E1: 03      		.db	endcopy_1063 - $ - 1
C4E2: 29      	  add  hl,hl
C4E3: 29      	  add  hl,hl
C4E4: 29      	  add  hl,hl
C4E5:         	endcopy_1063:
              	; --------------------------------------
              	;             16*
              	; --------------------------------------
C4E5:         	word_1064:
C4E5: CD85C0  		call	CopyFollowing
C4E8: 04      		.db	endcopy_1064 - $ - 1
C4E9: 29      	  add  hl,hl
C4EA: 29      	  add  hl,hl
C4EB: 29      	  add  hl,hl
C4EC: 29      	  add  hl,hl
C4ED:         	endcopy_1064:
              	; --------------------------------------
              	;             2/
              	; --------------------------------------
C4ED:         	word_1065:
C4ED: CD85C0  		call	CopyFollowing
C4F0: 04      		.db	endcopy_1065 - $ - 1
C4F1: CB2C    	  sra  h
C4F3: CB1D    	  rr   l
C4F5:         	endcopy_1065:
              	; --------------------------------------
              	;             4/
              	; --------------------------------------
C4F5:         	word_1066:
C4F5: CD85C0  		call	CopyFollowing
C4F8: 08      		.db	endcopy_1066 - $ - 1
C4F9: CB2C    	  sra  h
C4FB: CB1D    	  rr   l
C4FD: CB2C    	  sra  h
C4FF: CB1D    	  rr   l
C501:         	endcopy_1066:
              	; --------------------------------------
              	;             ABS
              	; --------------------------------------
C501:         	word_1067:
C501: CD92C0  		call	CompileCallFollowing
C504: CB7C    	  bit  7,h
C506: C8      	  ret  z
C507: C3B5C4  	  jp   __negate
              	; --------------------------------------
              	;             BSWAP
              	; --------------------------------------
C50A:         	word_1068:
C50A: CD85C0  		call	CopyFollowing
C50D: 03      		.db	endcopy_1068 - $ - 1
C50E: 7D      	  ld   a,l
C50F: 6C      	  ld   l,h
C510: 67      	  ld   h,a
C511:         	endcopy_1068:
              	; --------------------------------------
              	;             NOT
              	; --------------------------------------
C511:         	word_1069:
C511: CD92C0  		call	CompileCallFollowing
C514: 7C      	  ld   a,h
C515: 2F      	  cpl
C516: 67      	  ld   h,a
C517: 7D      	  ld   a,l
C518: 2F      	  cpl
C519: 6F      	  ld   l,a
C51A: C9      	  ret
              	
              	
              	
C51B:         	DIVDivideMod16:
C51B: C5      	 push  bc
C51C: 42      	 ld   b,d     ; DE
C51D: 4B      	 ld   c,e
C51E: EB      	 ex   de,hl
C51F: 210000  	 ld   hl,0
C522: 78      	 ld   a,b
C523: 0608    	 ld   b,8
C525:         	Div16_Loop1:
C525: 17      	 rla
C526: ED6A    	 adc  hl,hl
C528: ED52    	 sbc  hl,de
C52A: 3001    	 jr   nc,Div16_NoAdd1
C52C: 19      	 add  hl,de
C52D:         	Div16_NoAdd1:
C52D: 10F6    	 djnz  Div16_Loop1
C52F: 17      	 rla
C530: 2F      	 cpl
C531: 47      	 ld   b,a
C532: 79      	 ld   a,c
C533: 48      	 ld   c,b
C534: 0608    	 ld   b,8
C536:         	Div16_Loop2:
C536: 17      	 rla
C537: ED6A    	 adc  hl,hl
C539: ED52    	 sbc  hl,de
C53B: 3001    	 jr   nc,Div16_NoAdd2
C53D: 19      	 add  hl,de
C53E:         	Div16_NoAdd2:
C53E: 10F6    	 djnz  Div16_Loop2
C540: 17      	 rla
C541: 2F      	 cpl
C542: 51      	 ld   d,c
C543: 5F      	 ld   e,a
C544: C1      	 pop  bc
C545: C9      	 ret
C546:         	MULTMultiply16:
C546: C5      	  push  bc
C547: D5      	  push  de
C548: 44      	  ld   b,h        ; get multipliers in DE/BC
C549: 4D      	  ld   c,l
C54A: 210000  	  ld   hl,0        ; zero total
C54D:         	__Core__Mult_Loop:
C54D: CB41    	  bit  0,c        ; lsb of shifter is non-zero
C54F: 2801    	  jr   z,__Core__Mult_Shift
C551: 19      	  add  hl,de        ; add adder to total
C552:         	__Core__Mult_Shift:
C552: CB38    	  srl  b         ; shift BC right.
C554: CB19    	  rr   c
C556: EB      	  ex   de,hl        ; shift DE left
C557: 29      	  add  hl,hl
C558: EB      	  ex   de,hl
C559: 78      	  ld   a,b        ; loop back if BC is nonzero
C55A: B1      	  or   c
C55B: 20F0    	  jr   nz,__Core__Mult_Loop
C55D: D1      	  pop  de
C55E: C1      	  pop  bc
C55F: C9      	  ret
C560:         	ConstantHandler:
C560: 3EEB    	  ld   a,0xEB       ; compile ex de,hl
C562: CDABC0  	  call  CompileByte
C565: 3E21    	  ld   a,0x21       ; compile ld hl,
C567: CDABC0  	  call  CompileByte
C56A: E1      	  pop  hl        ; address of word to compile
C56B: 7E      	  ld   a,(hl)
C56C: 23      	  inc  hl
C56D: 66      	  ld   h,(hl)
C56E: 6F      	  ld   l,a
C56F: CD9CC0  	  call  CompileWord     ; compile that word.
C572: C9      	  ret
              	
              	
C573:         	VariableHandler:
C573: 3EEB    	  ld   a,0xEB       ; compile ex de,hl
C575: CDABC0  	  call  CompileByte
C578: 3E21    	  ld   a,0x21       ; compile ld hl,
C57A: CDABC0  	  call  CompileByte
C57D: E1      	  pop  hl        ; address of word to compile
C57E: CD9CC0  	  call  CompileWord     ; compile that word.
C581: C9      	  ret
              	
              	
C582:         	FixAccessCodeWrite:
C582: 3E2A    	  ld   a,0x2A       ; LD HL,(xxxx)
C584: 3002    	  jr   nc,_FACIsRead     ; use Carry to decide what to update
C586: 3E22    	  ld   a,0x22
C588:         	_FACIsRead:
              	  ;
C588: 2A0AC0  	  ld   hl,(CodeNextFree)    ; we save one byte.
C58B: 2B      	  dec  hl
C58C: 220AC0  	  ld   (CodeNextFree),hl
              	  ;
C58F: 46      	  ld   b,(hl)
C590: 2B      	  dec  hl
C591: 4E      	  ld   c,(hl)
C592: 70      	  ld   (hl),b
C593: 2B      	  dec  hl
C594: 71      	  ld   (hl),c
C595: 2B      	  dec  hl
C596: 77      	  ld   (hl),a
C597: C9      	  ret
C598:         	FreeSpace:
              	
              	; ***************************************************************************************
              	;
              	;										ROM Header
              	;
              	; ***************************************************************************************
              	
C598: FFFFFFFF		.org	$E000
C59C: FF...   	
E000: 50535200		.db  	"PSR",0 						; 4 bytes filler.
E004: 009C00B0		.db  	0,$9C,0,$B0,0,$6C 				; 12 bytes ROM Identify
E008: 006C    	
E00A: 006400A8		.db 	0,$64,0,$A8,$5F,$70 			; the $5F makes the total $70 so $00 is output to scrambler
E00E: 5F70    	
              		.org 	$E010
E010: C300C0  		jp 		start 							; BIOS enters here.
              	
              	
E013: FFFFFFFF		.org 	$E100
E017: FF...   	
E100:         	testCode:
E100: D3CCCFD7		.incbin "m7source.bin"
E104: 60706064	
E108: 71707070	
E10C: 60436160	
E110: 7BE0C6C1	
E114: D3D46071	
E118: 60647170	
E11C: 70706043	
E120: 61607BA0	
E124: 86819394	
E128: E0CDC1CB	
E12C: C5EEC9CD	
E130: CDC5C4C9	
E134: C1D4C560	
E138: 6D736048	
E13C: 606B6160	
E140: 7BE0C9CD	
E144: CDC5C4C9	
E148: C1D4C5A0	
E14C: 8D818B85	
E150: AE898D8D	
E154: 85848981	
E158: 9485604D	
E15C: 414B456E	
E160: 494D4D45	
E164: 44494154	
E168: 45607BE0	
E16C: DFD4C9CD	
E170: C5D3DFCC	
E174: CFCFD060	
E178: 56415249	
E17C: 41424C45	
E180: E0DFD2C5	
E184: D0C5C1D4	
E188: DFCCCFCF	
E18C: D0605641	
E190: 52494142	
E194: 4C45E0DF	
E198: C9C6DFD0	
E19C: C1D4C3C8	
E1A0: 60564152	
E1A4: 4941424C	
E1A8: 45E0D4C9	
E1AC: CDC5D360	
E1B0: 494D4D45	
E1B4: 44494154	
E1B8: 45604860	
E1BC: 4040605F	
E1C0: 54494D45	
E1C4: 535F4C4F	
E1C8: 4F506061	
E1CC: 61606472	
E1D0: 4260436C	
E1D4: 60644575	
E1D8: 60436C60	
E1DC: 7BE0D4C5	
E1E0: CEC46049	
E1E4: 4D4D4544	
E1E8: 49415445	
E1EC: 60644571	
E1F0: 60436C60	
E1F4: 64774360	
E1F8: 436C6064	
E1FC: 42756043	
E200: 6C606443	
E204: 7260436C	
E208: 605F5449	
E20C: 4D45535F	
E210: 4C4F4F50	
E214: 60404060	
E218: 6C607BE0	
E21C: D2C5D0C5	
E220: C1D46049	
E224: 4D4D4544	
E228: 49415445	
E22C: 60486040	
E230: 40605F52	
E234: 45504541	
E238: 545F4C4F	
E23C: 4F506061	
E240: 61607BE0	
E244: D5CED4C9	
E248: CC60494D	
E24C: 4D454449	
E250: 41544560	
E254: 64774360	
E258: 436C6064	
E25C: 42756043	
E260: 6C606443	
E264: 4160436C	
E268: 605F5245	
E26C: 50454154	
E270: 5F4C4F4F	
E274: 50604040	
E278: 606C607B	
E27C: E0C6CFD2	
E280: C5D6C5D2	
E284: 60494D4D	
E288: 45444941	
E28C: 54456064	
E290: 43736043	
E294: 6C605F52	
E298: 45504541	
E29C: 545F4C4F	
E2A0: 4F506040	
E2A4: 40606C60	
E2A8: 7BE0C9C6	
E2AC: 60494D4D	
E2B0: 45444941	
E2B4: 54456064	
E2B8: 77436043	
E2BC: 6C606442	
E2C0: 7560436C	
E2C4: 60644341	
E2C8: 60436C60	
E2CC: 48604040	
E2D0: 605F4946	
E2D4: 5F504154	
E2D8: 43486061	
E2DC: 61607060	
E2E0: 6C607BE0	
E2E4: EDC9C660	
E2E8: 494D4D45	
E2EC: 44494154	
E2F0: 45606443	
E2F4: 4260436C	
E2F8: 60647743	
E2FC: 60436C60	
E300: 64434160	
E304: 436C6048	
E308: 60404060	
E30C: 5F49465F	
E310: 50415443	
E314: 48606161	
E318: 6070606C	
E31C: 607BE0C5	
E320: CCD3C560	
E324: 494D4D45	
E328: 44494154	
E32C: 45604860	
E330: 40406073	
E334: 606B605F	
E338: 49465F50	
E33C: 41544348	
E340: 60404060	
E344: 61606443	
E348: 7360436C	
E34C: 60486040	
E350: 40605F49	
E354: 465F5041	
E358: 54434860	
E35C: 61616070	
E360: 606C607B	
E364: E0D4C8C5	
E368: CE60494D	
E36C: 4D454449	
E370: 41544560	
E374: 48604040	
E378: 605F4946	
E37C: 5F504154	
E380: 43486040	
E384: 40606160	
E388: 7BE0C3CF	
E38C: CEEED0CF	
E390: D3605641	
E394: 52494142	
E398: 4C45E0C3	
E39C: CFCEEED8	
E3A0: 60564152	
E3A4: 4941424C	
E3A8: 45E0C3CF	
E3AC: CEEED960	
E3B0: 56415249	
E3B4: 41424C45	
E3B8: E0C3CFCE	
E3BC: EEC3CFCC	
E3C0: CFD5D260	
E3C4: 56415249	
E3C8: 41424C45	
E3CC: E0C3CFCE	
E3D0: EED3C3D2	
E3D4: CFCCCCA0	
E3D8: B2B26043	
E3DC: 4F4E5354	
E3E0: 414E54E0	
E3E4: C3CFCEEE	
E3E8: C2C1D3C5	
E3EC: A0A4B3B0	
E3F0: B2B86043	
E3F4: 4F4E5354	
E3F8: 414E54E0	
E3FC: C3CFCEEE	
E400: D7C9C4D4	
E404: C8A0B4B0	
E408: 60434F4E	
E40C: 5354414E	
E410: 54E0C3CF	
E414: CEEEC8C5	
E418: C9C7C8D4	
E41C: A0B2B460	
E420: 434F4E53	
E424: 54414E54	
E428: A0A4B2B0	
E42C: A0838F8E	
E430: AE838F8C	
E434: 8F9592A0	
E438: A1E0C3CF	
E43C: CEEEC8CF	
E440: CDC56041	
E444: 427E5260	
E448: 7060434F	
E44C: 4E6E5860	
E450: 61616070	
E454: 60434F4E	
E458: 6E596061	
E45C: 6160434F	
E460: 4E6E4241	
E464: 53456043	
E468: 4F4E6E50	
E46C: 4F536061	
E470: 6160527E	
E474: 4142607B	
E478: E0C3CFCE	
E47C: EEC9CECB	
E480: 6041427E	
E484: 52607175	
E488: 60414E44	
E48C: 60417E52	
E490: 60434F4E	
E494: 6E434F4C	
E498: 4F555260	
E49C: 40406064	
E4A0: 70466041	
E4A4: 4E446043	
E4A8: 4F4E6E43	
E4AC: 4F4C4F55	
E4B0: 52606161	
E4B4: 60527E41	
E4B8: 6071766A	
E4BC: 60434F4E	
E4C0: 6E434F4C	
E4C4: 4F555260	
E4C8: 6B616052	
E4CC: 7E414260	
E4D0: 7BE0C3CF	
E4D4: CEEED0C1	
E4D8: D0C5D260	
E4DC: 41427E52	
E4E0: 60717560	
E4E4: 414E4460	
E4E8: 417E5260	
E4EC: 434F4E6E	
E4F0: 434F4C4F	
E4F4: 55526040	
E4F8: 40606446	
E4FC: 7060414E	
E500: 4460434F	
E504: 4E6E434F	
E508: 4C4F5552	
E50C: 60616160	
E510: 527E4160	
E514: 434F4E6E	
E518: 434F4C4F	
E51C: 5552606B	
E520: 6160527E	
E524: 4142607B	
E528: E0C3CFCE	
E52C: EEC3CCC5	
E530: C1D26041	
E534: 42437E52	
E538: 60434F4E	
E53C: 6E484F4D	
E540: 45607170	
E544: 72746041	
E548: 7E436064	
E54C: 73707070	
E550: 60647270	
E554: 6046494C	
E558: 4C606473	
E55C: 74707060	
E560: 434F4E6E	
E564: 434F4C4F	
E568: 55526040	
E56C: 40604649	
E570: 4C4C6052	
E574: 7E414243	
E578: 607BE0C3	
E57C: CFCEEEC3	
E580: CCC5C1D2	
E584: EEC5C4C9	
E588: D4604142	
E58C: 437E5260	
E590: 434F4E6E	
E594: 48454947	
E598: 48546043	
E59C: 4F4E6E53	
E5A0: 43524F4C	
E5A4: 4C606D60	
E5A8: 434F4E6E	
E5AC: 57494454	
E5B0: 48606A60	
E5B4: 417E4360	
E5B8: 434F4E6E	
E5BC: 5343524F	
E5C0: 4C4C6043	
E5C4: 4F4E6E57	
E5C8: 49445448	
E5CC: 606A6043	
E5D0: 4F4E6E42	
E5D4: 41534560	
E5D8: 6B60417E	
E5DC: 52606472	
E5E0: 70604649	
E5E4: 4C4C6052	
E5E8: 7E416064	
E5EC: 74707060	
E5F0: 6B60434F	
E5F4: 4E6E434F	
E5F8: 4C4F5552	
E5FC: 60404060	
E600: 46494C4C	
E604: 60527E41	
E608: 4243607B	
E60C: E0DFC3CF	
E610: CEEED3C3	
E614: D2CFCCCC	
E618: 60434F4E	
E61C: 6E534352	
E620: 4F4C4C60	
E624: 6D6D6043	
E628: 4F4E6E57	
E62C: 49445448	
E630: 606A6041	
E634: 7E436043	
E638: 4F4E6E42	
E63C: 41534560	
E640: 64737075	
E644: 7060434F	
E648: 50596064	
E64C: 73747278	
E650: 60647374	
E654: 75706043	
E658: 4F505960	
E65C: 74706041	
E660: 7E436043	
E664: 4F4E6E53	
E668: 43524F4C	
E66C: 4C606D6D	
E670: 60434F4E	
E674: 6E574944	
E678: 5448606A	
E67C: 60434F4E	
E680: 6E424153	
E684: 45606B60	
E688: 417E5260	
E68C: 64727060	
E690: 46494C4C	
E694: 60527E41	
E698: 60717072	
E69C: 74606B60	
E6A0: 434F4E6E	
E6A4: 434F4C4F	
E6A8: 55526040	
E6AC: 40604649	
E6B0: 4C4C606D	
E6B4: 7160434F	
E6B8: 4E6E5960	
E6BC: 6B616043	
E6C0: 4F4E6E57	
E6C4: 49445448	
E6C8: 60706D60	
E6CC: 434F4E6E	
E6D0: 504F5360	
E6D4: 6B61607B	
E6D8: E0DFC3CF	
E6DC: CEEEC4CF	
E6E0: D7CE6071	
E6E4: 60434F4E	
E6E8: 6E59606B	
E6EC: 61607060	
E6F0: 434F4E6E	
E6F4: 58606161	
E6F8: 60434F4E	
E6FC: 6E596040	
E700: 4060434F	
E704: 4E6E5343	
E708: 524F4C4C	
E70C: 607D6049	
E710: 46605F43	
E714: 4F4E6E53	
E718: 43524F4C	
E71C: 4C605448	
E720: 454E607B	
E724: 607BE0DF	
E728: C3CFCEEE	
E72C: C5CDC9D4	
E730: 60434F4E	
E734: 6E504F53	
E738: 60406043	
E73C: 6160434F	
E740: 4E6E504F	
E744: 53604040	
E748: 60717072	
E74C: 74606B60	
E750: 434F4E6E	
E754: 434F4C4F	
E758: 55526040	
E75C: 40605357	
E760: 41506043	
E764: 61607160	
E768: 434F4E6E	
E76C: 504F5360	
E770: 6B616071	
E774: 60434F4E	
E778: 6E58606B	
E77C: 6160434F	
E780: 4E6E5860	
E784: 40406043	
E788: 4F4E6E57	
E78C: 49445448	
E790: 607D6049	
E794: 46605F43	
E798: 4F4E6E44	
E79C: 4F574E60	
E7A0: 5448454E	
E7A4: 607BE0C3	
E7A8: CFCEEEC3	
E7AC: D2604142	
E7B0: 437E5260	
E7B4: 52455045	
E7B8: 41546073	
E7BC: 72605F43	
E7C0: 4F4E6E45	
E7C4: 4D495460	
E7C8: 434F4E6E	
E7CC: 58604040	
E7D0: 60707D60	
E7D4: 554E5449	
E7D8: 4C60527E	
E7DC: 41424360	
E7E0: 7BE0C3CF	
E7E4: CEEEC5CD	
E7E8: C9D46041	
E7EC: 42437E52	
E7F0: 60417E52	
E7F4: 60717360	
E7F8: 7D604946	
E7FC: 60527E41	
E800: 60434F4E	
E804: 6E435260	
E808: 454C5345	
E80C: 60527E41	
E810: 605F434F	
E814: 4E6E454D	
E818: 49546054	
E81C: 48454E60	
E820: 527E4142	
E824: 43607BE0	
E828: C3CFCEEE	
E82C: D0D2C9CE	
E830: D4604142	
E834: 7E526052	
E838: 45504541	
E83C: 5460417E	
E840: 42604340	
E844: 60494660	
E848: 434F4E6E	
E84C: 454D4954	
E850: 60454C53	
E854: 4560527E	
E858: 4142607B	
E85C: 60544845	
E860: 4E60427E	
E864: 41606B6B	
E868: 60464F52	
E86C: 45564552	
E870: 607BE0C3	
E874: CFCEEECD	
E878: CFD6C560	
E87C: 41427E52	
E880: 60427E52	
E884: 60434F4E	
E888: 6E596061	
E88C: 6160527E	
E890: 4160434F	
E894: 4E6E5860	
E898: 61616043	
E89C: 4F4E6E59	
E8A0: 60404060	
E8A4: 7470606A	
E8A8: 60434F4E	
E8AC: 6E586040	
E8B0: 40606B60	
E8B4: 434F4E6E	
E8B8: 42415345	
E8BC: 606B6043	
E8C0: 4F4E6E50	
E8C4: 4F536061	
E8C8: 6160527E	
E8CC: 4142607B	
E8D0: E0C3CFCE	
E8D4: EEC9CECB	
E8D8: C5D9A0A4	
E8DC: 8384A083	
E8E0: ACA0A4B1	
E8E4: 8581B2A0	
E8E8: ACA0A4B6	
E8EC: 86A083AC	
E8F0: A0A4B2B6	
E8F4: A083ACA0	
E8F8: A4B0B0A0	
E8FC: 83AC607B	
E900: E0C3CFCE	
E904: EEC7C5D4	
E908: 60524550	
E90C: 45415460	
E910: 434F4E6E	
E914: 494E4B45	
E918: 5960554E	
E91C: 54494C60	
E920: 7BE0C9C6	
E924: EEC2D5C6	
E928: C6C5D2A0	
E92C: B3B26041	
E930: 52524159	
E934: E0C9C6EE	
E938: C2D0D4D2	
E93C: 60564152	
E940: 4941424C	
E944: 45E0C9C6	
E948: EECDC1C9	
E94C: CE60417E	
E950: 5260434F	
E954: 4E6E434C	
E958: 4541526E	
E95C: 45444954	
E960: 60756043	
E964: 4F4E6E49	
E968: 4E4B6070	
E96C: 60434F4E	
E970: 6E504150	
E974: 45526043	
E978: 4F4E6E57	
E97C: 49445448	
E980: 60726F60	
E984: 434F4E6E	
E988: 48454947	
E98C: 4854606D	
E990: 6D6D6043	
E994: 4F4E6E4D	
E998: 4F564560	
E99C: 527E4160	
E9A0: 434F4E6E	
E9A4: 5052494E	
E9A8: 54607060	
E9AC: 434F4E6E	
E9B0: 48454947	
E9B4: 4854606D	
E9B8: 6D6D6043	
E9BC: 4F4E6E4D	
E9C0: 4F564560	
E9C4: 7360434F	
E9C8: 4E6E494E	
E9CC: 4B604946	
E9D0: 6E425546	
E9D4: 46455260	
E9D8: 49466E42	
E9DC: 50545260	
E9E0: 61616052	
E9E4: 45504541	
E9E8: 5460434F	
E9EC: 4E6E4745	
E9F0: 54607373	
E9F4: 606D606D	
E9F8: 49466049	
E9FC: 466E4255	
EA00: 46464552	
EA04: 6064434F	
EA08: 4D50494C	
EA0C: 45526054	
EA10: 48454E60	
EA14: 7373606B	
EA18: 60434F4E	
EA1C: 6E454D49	
EA20: 54607976	
EA24: 606D606D	
EA28: 49466079	
EA2C: 76606B60	
EA30: 454C5345	
EA34: 60767460	
EA38: 6B605448	
EA3C: 454E6064	
EA40: 73466041	
EA44: 4E446064	
EA48: 7870604F	
EA4C: 52604946	
EA50: 6E425054	
EA54: 52604040	
EA58: 60616071	
EA5C: 6049466E	
EA60: 42505452	
EA64: 606B6160	
EA68: 464F5245	
EA6C: 56455260	
EA70: 42524541	
EA74: 4B607BE0	
EA78: C9C6EEC9	
EA7C: CED3D4C1	
EA80: CCCC6064	
EA84: 53595354	
EA88: 454D606B	
EA8C: 6B6B6049	
EA90: 466E4D41	
EA94: 494E6041	
EA98: 44445245	
EA9C: 53536E4F	
EAA0: 46605357	
EAA4: 41506061	
EAA8: 607BA089	
EAAC: 86AE898E	
EAB0: 9394818C	
EAB4: 8CA0838F	
EAB8: 8EAE838C	
EABC: 858192A0	
EAC0: 938C8F97	
EAC4: A0978192	
EAC8: 8DAE9394	
EACC: 81929400	
              	
              	; ***************************************************************************************
              	;
              	; 				Load the Dictionary into High memory, it works down.
              	;
              	; ***************************************************************************************
              	
              		.include "vocabulary/dictionary.inc" 	; get length
01B8:         	DictionarySize = 440
EAD0: FFFFFFFF		.org 	CodeEnd-DictionarySize+1 		; set start pointer
EAD4: FF...   	
FE48:         	DictionaryInstalledBase:
              		.include "vocabulary/dictionary.asm" 	; pregenerated dictionary.
              	; <
FE48: 80      		.db	$80
FE49: A5C2    		.dw	word_1000
FE4B: BC      		.db	$bc
              	; =
FE4C: 80      		.db	$80
FE4D: BDC2    		.dw	word_1001
FE4F: BD      		.db	$bd
              	; -
FE50: 80      		.db	$80
FE51: CCC2    		.dw	word_1002
FE53: AD      		.db	$ad
              	; +
FE54: 80      		.db	$80
FE55: D6C2    		.dw	word_1003
FE57: AB      		.db	$ab
              	; AND
FE58: 80      		.db	$80
FE59: DBC2    		.dw	word_1004
FE5B: 010E84  		.db	$1,$e,$84
              	; OR
FE5E: 80      		.db	$80
FE5F: E5C2    		.dw	word_1005
FE61: 0F92    		.db	$f,$92
              	; XOR
FE63: 80      		.db	$80
FE64: EFC2    		.dw	word_1006
FE66: 180F92  		.db	$18,$f,$92
              	; /
FE69: 80      		.db	$80
FE6A: F9C2    		.dw	word_1007
FE6C: AF      		.db	$af
              	; MOD
FE6D: 80      		.db	$80
FE6E: 03C3    		.dw	word_1008
FE70: 0D0F84  		.db	$d,$f,$84
              	; !
FE73: 80      		.db	$80
FE74: 0CC3    		.dw	word_1009
FE76: A1      		.db	$a1
              	; @
FE77: 80      		.db	$80
FE78: 14C3    		.dw	word_1010
FE7A: 80      		.db	$80
              	; +!
FE7B: 80      		.db	$80
FE7C: 1CC3    		.dw	word_1011
FE7E: 2BA1    		.db	$2b,$a1
              	; C!
FE80: 80      		.db	$80
FE81: 28C3    		.dw	word_1012
FE83: 03A1    		.db	$3,$a1
              	; C@
FE85: 80      		.db	$80
FE86: 2DC3    		.dw	word_1013
FE88: 0380    		.db	$3,$80
              	; P@
FE8A: 80      		.db	$80
FE8B: 34C3    		.dw	word_1014
FE8D: 1080    		.db	$10,$80
              	; P!
FE8F: 80      		.db	$80
FE90: 3CC3    		.dw	word_1015
FE92: 10A1    		.db	$10,$a1
              	; ,
FE94: 80      		.db	$80
FE95: 42C3    		.dw	word_1016
FE97: AC      		.db	$ac
              	; ;
FE98: 81      		.db	$81
FE99: 48C3    		.dw	word_1017
FE9B: BB      		.db	$bb
              	; C,
FE9C: 80      		.db	$80
FE9D: 4EC3    		.dw	word_1018
FE9F: 03AC    		.db	$3,$ac
              	; COPY
FEA1: 80      		.db	$80
FEA2: 55C3    		.dw	word_1019
FEA4: 030F1099		.db	$3,$f,$10,$99
              	; FILL
FEA8: 80      		.db	$80
FEA9: 75C3    		.dw	word_1020
FEAB: 06090C8C		.db	$6,$9,$c,$8c
              	; HALT
FEAF: 80      		.db	$80
FEB0: 88C3    		.dw	word_1021
FEB2: 08010C94		.db	$8,$1,$c,$94
              	; BREAK
FEB6: 80      		.db	$80
FEB7: 8FC3    		.dw	word_1022
FEB9: 02120501		.db	$2,$12,$5,$1,$8b
FEBD: 8B      	
              	; *
FEBE: 80      		.db	$80
FEBF: 94C3    		.dw	word_1023
FEC1: AA      		.db	$aa
              	; SWAP
FEC2: 80      		.db	$80
FEC3: 9AC3    		.dw	word_1024
FEC5: 13170190		.db	$13,$17,$1,$90
              	; A>B
FEC9: 80      		.db	$80
FECA: 9FC3    		.dw	word_1025
FECC: 013E82  		.db	$1,$3e,$82
              	; A>C
FECF: 80      		.db	$80
FED0: A5C3    		.dw	word_1026
FED2: 013E83  		.db	$1,$3e,$83
              	; B>A
FED5: 80      		.db	$80
FED6: ABC3    		.dw	word_1027
FED8: 023E81  		.db	$2,$3e,$81
              	; B>C
FEDB: 80      		.db	$80
FEDC: B1C3    		.dw	word_1028
FEDE: 023E83  		.db	$2,$3e,$83
              	; C>A
FEE1: 80      		.db	$80
FEE2: B7C3    		.dw	word_1029
FEE4: 033E81  		.db	$3,$3e,$81
              	; C>B
FEE7: 80      		.db	$80
FEE8: BDC3    		.dw	word_1030
FEEA: 033E82  		.db	$3,$3e,$82
              	; PUSH
FEED: 81      		.db	$81
FEEE: C3C3    		.dw	word_1031
FEF0: 10151388		.db	$10,$15,$13,$88
              	; POP
FEF4: 81      		.db	$81
FEF5: C8C3    		.dw	word_1032
FEF7: 100F90  		.db	$10,$f,$90
              	; A>R
FEFA: 81      		.db	$81
FEFB: CEC3    		.dw	word_1033
FEFD: 013E92  		.db	$1,$3e,$92
              	; R>A
FF00: 81      		.db	$81
FF01: D3C3    		.dw	word_1034
FF03: 123E81  		.db	$12,$3e,$81
              	; B>R
FF06: 81      		.db	$81
FF07: D8C3    		.dw	word_1035
FF09: 023E92  		.db	$2,$3e,$92
              	; R>B
FF0C: 81      		.db	$81
FF0D: DDC3    		.dw	word_1036
FF0F: 123E82  		.db	$12,$3e,$82
              	; C>R
FF12: 81      		.db	$81
FF13: E2C3    		.dw	word_1037
FF15: 033E92  		.db	$3,$3e,$92
              	; R>C
FF18: 81      		.db	$81
FF19: E7C3    		.dw	word_1038
FF1B: 123E83  		.db	$12,$3e,$83
              	; AB>R
FF1E: 81      		.db	$81
FF1F: ECC3    		.dw	word_1039
FF21: 01023E92		.db	$1,$2,$3e,$92
              	; R>AB
FF25: 81      		.db	$81
FF26: F2C3    		.dw	word_1040
FF28: 123E0182		.db	$12,$3e,$1,$82
              	; ABC>R
FF2C: 81      		.db	$81
FF2D: F8C3    		.dw	word_1041
FF2F: 0102033E		.db	$1,$2,$3,$3e,$92
FF33: 92      	
              	; R>ABC
FF34: 81      		.db	$81
FF35: FFC3    		.dw	word_1042
FF37: 123E0102		.db	$12,$3e,$1,$2,$83
FF3B: 83      	
              	; H
FF3C: 80      		.db	$80
FF3D: 06C4    		.dw	word_1043
FF3F: 88      		.db	$88
              	; $SYSTEM
FF40: 80      		.db	$80
FF41: 0EC4    		.dw	word_1044
FF43: 24131913		.db	$24,$13,$19,$13,$14,$5,$8d
FF47: 14058D  	
              	; WARM.START
FF4A: 80      		.db	$80
FF4B: 16C4    		.dw	word_1045
FF4D: 1701120D		.db	$17,$1,$12,$d,$2e,$13,$14,$1,$12,$94
FF51: 2E131401	
FF55: 1294    	
              	; REPORT.ERROR
FF57: 80      		.db	$80
FF58: 1CC4    		.dw	word_1046
FF5A: 1205100F		.db	$12,$5,$10,$f,$12,$14,$2e,$5,$12,$12,$f,$92
FF5E: 12142E05	
FF62: 12120F92	
              	; $COMPILER
FF66: 80      		.db	$80
FF67: 22C4    		.dw	word_1047
FF69: 24030F0D		.db	$24,$3,$f,$d,$10,$9,$c,$5,$92
FF6D: 10090C05	
FF71: 92      	
              	; CONSTANT
FF72: 80      		.db	$80
FF73: 28C4    		.dw	word_1048
FF75: 030F0E13		.db	$3,$f,$e,$13,$14,$1,$e,$94
FF79: 14010E94	
              	; VARIABLE
FF7D: 80      		.db	$80
FF7E: 3DC4    		.dw	word_1049
FF80: 16011209		.db	$16,$1,$12,$9,$1,$2,$c,$85
FF84: 01020C85	
              	; ARRAY
FF88: 80      		.db	$80
FF89: 52C4    		.dw	word_1050
FF8B: 01121201		.db	$1,$12,$12,$1,$99
FF8F: 99      	
              	; ADDRESS.OF
FF90: 80      		.db	$80
FF91: 6EC4    		.dw	word_1051
FF93: 01040412		.db	$1,$4,$4,$12,$5,$13,$13,$2e,$f,$86
FF97: 0513132E	
FF9B: 0F86    	
              	; !!
FF9D: 81      		.db	$81
FF9E: 82C4    		.dw	word_1052
FFA0: 21A1    		.db	$21,$a1
              	; @@
FFA2: 81      		.db	$81
FFA3: 93C4    		.dw	word_1053
FFA5: 0080    		.db	$0,$80
              	; ---
FFA7: 80      		.db	$80
FFA8: 9CC4    		.dw	word_1054
FFAA: 2D2DAD  		.db	$2d,$2d,$ad
              	; --
FFAD: 80      		.db	$80
FFAE: A2C4    		.dw	word_1055
FFB0: 2DAD    		.db	$2d,$ad
              	; ++
FFB2: 80      		.db	$80
FFB3: A7C4    		.dw	word_1056
FFB5: 2BAB    		.db	$2b,$ab
              	; +++
FFB7: 80      		.db	$80
FFB8: ACC4    		.dw	word_1057
FFBA: 2B2BAB  		.db	$2b,$2b,$ab
              	; 0-
FFBD: 80      		.db	$80
FFBE: B2C4    		.dw	word_1058
FFC0: 30AD    		.db	$30,$ad
              	; 0<
FFC2: 80      		.db	$80
FFC3: BDC4    		.dw	word_1059
FFC5: 30BC    		.db	$30,$bc
              	; 0=
FFC7: 80      		.db	$80
FFC8: C8C4    		.dw	word_1060
FFCA: 30BD    		.db	$30,$bd
              	; 2*
FFCC: 80      		.db	$80
FFCD: D3C4    		.dw	word_1061
FFCF: 32AA    		.db	$32,$aa
              	; 4*
FFD1: 80      		.db	$80
FFD2: D8C4    		.dw	word_1062
FFD4: 34AA    		.db	$34,$aa
              	; 8*
FFD6: 80      		.db	$80
FFD7: DEC4    		.dw	word_1063
FFD9: 38AA    		.db	$38,$aa
              	; 16*
FFDB: 80      		.db	$80
FFDC: E5C4    		.dw	word_1064
FFDE: 3136AA  		.db	$31,$36,$aa
              	; 2/
FFE1: 80      		.db	$80
FFE2: EDC4    		.dw	word_1065
FFE4: 32AF    		.db	$32,$af
              	; 4/
FFE6: 80      		.db	$80
FFE7: F5C4    		.dw	word_1066
FFE9: 34AF    		.db	$34,$af
              	; ABS
FFEB: 80      		.db	$80
FFEC: 01C5    		.dw	word_1067
FFEE: 010293  		.db	$1,$2,$93
              	; BSWAP
FFF1: 80      		.db	$80
FFF2: 0AC5    		.dw	word_1068
FFF4: 02131701		.db	$2,$13,$17,$1,$90
FFF8: 90      	
              	; NOT
FFF9: 80      		.db	$80
FFFA: 11C5    		.dw	word_1069
FFFC: 0E0F94  		.db	$e,$f,$94
FFFF: 00      		.db	$00


total time: 0.0070 sec.
no errors
